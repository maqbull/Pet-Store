(this["webpackJsonppet-store"]=this["webpackJsonppet-store"]||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var c=n(4),a=n.n(c),o=n(16),r=n(10),i=n(2),s=n(1),u=n(9),l=n.n(u),j=n(0),b=function(e){var t=e.pet,n=e.onEdit,c=e.onRemove;return Object(j.jsxs)("div",{className:"pet",children:[t.photo?Object(j.jsx)("img",{className:"img",src:t.photo,alt:"Animals"}):Object(j.jsx)("div",{className:"no-photo",children:"?"}),Object(j.jsx)("div",{className:"kind",children:t.kind}),Object(j.jsx)("button",{className:"pet-name",onClick:n,children:t.name}),Object(j.jsx)("button",{className:"adopt-btn",onClick:c,children:Object(j.jsx)("span",{role:"img","aria-label":"adopt this pet",children:Object(j.jsx)("img",{className:"adopt-img",src:"https://www.buttonmuseum.org/sites/default/files/CA-adopt-a-pet-button-busy-beaver-button-museum.png",alt:"Adopt"})})})]})},d=n(6),h=n.n(d),p=n(11),O=function(e){var t=e.pet,n=e.onSave,c=e.onCancel,a=t||{name:"",kind:"",photo:null},o=Object(s.useState)(a.name),r=Object(i.a)(o,2),u=r[0],l=r[1],b=Object(s.useState)(a.kind),d=Object(i.a)(b,2),h=d[0],O=d[1],f=Object(s.useState)(a.photo),m=Object(i.a)(f,2),x=m[0],v=m[1],g=Object(s.useState)(null),S=Object(i.a)(g,2),C=S[0],N=S[1],k=Object(s.useState)(!1),y=Object(i.a)(k,2),w=y[0],E=y[1],A=Object(s.useRef)();return Object(j.jsxs)("form",{action:"",className:"pet-form",onSubmit:function(e){e.preventDefault(),E(!0),n(Object(p.a)(Object(p.a)({},t),{},{name:u,kind:h,photo:x})).catch((function(e){console.error(e),N(e),E(!1)}))},children:[x&&Object(j.jsx)("img",{className:"img img-form",alt:"the pet",src:x}),Object(j.jsx)("label",{className:"label-photo",htmlFor:"photo",children:"Photo"}),Object(j.jsx)("input",{type:"file",id:"photo",ref:A,onChange:function(){var e=A.current.files&&A.current.files[0];if(e){var t=new FileReader;t.onloadend=function(){return v(t.result)},t.readAsDataURL(e)}}}),Object(j.jsx)("label",{htmlFor:"name",children:"Name"}),Object(j.jsx)("input",{type:"text",id:"name",value:u,onChange:function(e){return l(e.target.value)}}),C&&C.name&&Object(j.jsx)("div",{className:"error",children:C.name}),Object(j.jsx)("label",{htmlFor:"kind",children:"Kind"}),Object(j.jsxs)("select",{name:"kind",id:"kind",value:h,onChange:function(e){return O(e.target.value)},children:[Object(j.jsx)("option",{value:"",children:"Choose a kind"}),Object(j.jsx)("option",{value:"cat",children:"Cat"}),Object(j.jsx)("option",{value:"dog",children:"Dog"})]}),C&&C.kind&&Object(j.jsx)("div",{className:"error",children:C.kind}),Object(j.jsx)("button",{className:"form-btn",disabled:w,type:"button",onClick:c,children:"Cancel"}),Object(j.jsx)("button",{className:"form-btn",disabled:w,type:"submit",children:"Save"})]})},f=function(e){var t=e.onCancel,n=e.onSave;return Object(j.jsxs)(h.a,{isOpen:!0,onRequestClose:t,children:[Object(j.jsx)("h2",{children:"New Pet"}),Object(j.jsx)(O,{onCancel:t,onSave:n})]})},m=function(e){var t=e.pet,n=e.onCancel,c=e.onSave;return Object(j.jsxs)(h.a,{isOpen:!0,onRequestClose:n,children:[Object(j.jsx)("h2",{children:"Edit Pet"}),Object(j.jsx)(O,{pet:t,onCancel:n,onSave:c})]})},x=function(e){return e.ok?e:e.json().then((function(e){throw e}))},v=function(e){return fetch("http://localhost:3001/pets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(x).then((function(e){return e.json()}))},g=function(e){return fetch("http://localhost:3001/pets/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(x).then((function(e){return e.json()}))},S=(n(34),function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),n=(t[0],t[1],Object(s.useState)("")),c=Object(i.a)(n,2),u=(c[0],c[1],Object(s.useState)([])),l=Object(i.a)(u,2),d=l[0],h=l[1],p=Object(s.useState)(!1),O=Object(i.a)(p,2),S=O[0],C=O[1],N=Object(s.useState)(null),k=Object(i.a)(N,2),y=k[0],w=k[1],E=Object(s.useState)(!1),A=Object(i.a)(E,2),R=A[0],P=A[1];Object(s.useEffect)((function(){P(!0),fetch("http://localhost:3001/pets").then((function(e){return e.json()})).then((function(e){return h(e)})).finally((function(){return P(!1)}))}),[]);var F=function(){var e=Object(r.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v(t).then((function(e){h([].concat(Object(o.a)(d),[e])),C(!1)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(r.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g(t).then((function(e){h((function(t){return t.map((function(t){return t.id===e.id?e:t}))})),w(null)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){var t;window.confirm("Are you sure you want to adopt ".concat(e.name," ?"))&&(t=e,fetch("http://localhost:3001/pets/".concat(t.id),{method:"DELETE"}).then(x).then((function(e){return e.json()}))).then((function(){h((function(t){return t.filter((function(t){return t.id!==e.id}))}))}))};return Object(j.jsxs)("main",{children:[Object(j.jsx)("h1",{children:"Adopt-a-Pet"}),R?Object(j.jsx)("div",{className:"loading",children:"Loading ..."}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("ul",{className:"img-container",children:d.map((function(e){return Object(j.jsx)("li",{children:Object(j.jsx)(b,{pet:e,onRemove:function(){return D(e)},onEdit:function(){return w(e)}})},e.id)}))}),Object(j.jsx)("button",{className:"add-a-pet",onClick:function(){return C(!0)},children:" Add a pet "})]}),S&&Object(j.jsx)(f,{onCancel:function(){return C(!1)},onSave:F}),y&&Object(j.jsx)(m,{pet:y,onCancel:function(){return w(null)},onSave:T})]})});l.a.render(Object(j.jsx)(S,{}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.d9f0fa8d.chunk.js.map